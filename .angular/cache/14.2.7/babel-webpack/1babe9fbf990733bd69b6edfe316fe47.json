{"ast":null,"code":"import { Observable } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./services/app-state.service\";\nimport * as i2 from \"@angular/common\";\n\nfunction AppComponent_table_1_th_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 6);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const h_r8 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(h_r8);\n  }\n}\n\nfunction AppComponent_table_1_tr_4_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 6);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const c_r11 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(c_r11);\n  }\n}\n\nfunction AppComponent_table_1_tr_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtemplate(1, AppComponent_table_1_tr_4_td_1_Template, 2, 1, \"td\", 4);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const r_r9 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", r_r9);\n  }\n}\n\nfunction AppComponent_table_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\")(1, \"tr\");\n    i0.ɵɵtemplate(2, AppComponent_table_1_th_2_Template, 2, 1, \"th\", 4);\n    i0.ɵɵpipe(3, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, AppComponent_table_1_tr_4_Template, 2, 1, \"tr\", 5);\n    i0.ɵɵpipe(5, \"async\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    let tmp_1_0;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", (tmp_0_0 = i0.ɵɵpipeBind1(3, 2, ctx_r0.data$)) == null ? null : tmp_0_0.header);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", (tmp_1_0 = i0.ɵɵpipeBind1(5, 4, ctx_r0.data$)) == null ? null : tmp_1_0.rows);\n  }\n}\n\nfunction AppComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\", 7);\n    i0.ɵɵtext(2, \"Lease Start Date:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 8);\n    i0.ɵɵelementStart(4, \"label\", 9);\n    i0.ɵɵtext(5, \"Lease End Date:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"input\", 10);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function AppComponent_button_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.onEdit());\n    });\n    i0.ɵɵtext(1, \"Edit\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function AppComponent_button_7_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.onClose());\n    });\n    i0.ɵɵtext(1, \"X\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_button_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function AppComponent_button_9_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.onSubmit());\n    });\n    i0.ɵɵtext(1, \"Submit\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_p_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"Error Occured Please try again...\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class AppComponent {\n  constructor(appStore) {\n    this.appStore = appStore;\n    this.data$ = new Observable();\n    this.current$ = new Observable();\n    this.title = 'ustitch-manager';\n  }\n\n  ngOnInit() {\n    this.current$ = this.appStore.selectAll();\n    this.data$ = new Observable(subscriber => {\n      subscriber.next({\n        header: ['a', 'b', 'c'],\n        rows: [['1', '2', '3'], ['2', '3', '1'], ['3', '1', '2']]\n      });\n    });\n    setTimeout(() => this.appStore.loaded(), 5000);\n  }\n\n  onEdit() {\n    this.appStore.edit_clicked('1');\n  }\n\n  onClose() {\n    this.appStore.click_closed();\n  }\n\n  onSubmit() {\n    this.appStore.submit(new Observable(subscriber => {\n      setTimeout(() => subscriber.next(Math.random() > 0.4 ? 'success' : 'fail'), 1000);\n    }));\n  }\n\n}\n\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.AppStateService));\n};\n\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  decls: 17,\n  vars: 22,\n  consts: [[1, \"container\", \"mx-auto\"], [4, \"ngIf\"], [\"class\", \"p-1 m-2 btn btn-blue\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"p-1 m-2 btn btn-red\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"px-4\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngFor\", \"ngForOf\"], [1, \"px-4\"], [\"for\", \"leaseStart\"], [\"type\", \"date\", \"name\", \"start\", \"id\", \"leaseStart\"], [\"for\", \"leaseEnd\"], [\"type\", \"date\", \"name\", \"end\", \"id\", \"leaseEnd\"], [1, \"p-1\", \"m-2\", \"btn\", \"btn-blue\", 3, \"click\"], [1, \"p-1\", \"m-2\", \"btn\", \"btn-red\", 3, \"click\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtemplate(1, AppComponent_table_1_Template, 6, 6, \"table\", 1);\n      i0.ɵɵpipe(2, \"async\");\n      i0.ɵɵtemplate(3, AppComponent_div_3_Template, 7, 0, \"div\", 1);\n      i0.ɵɵpipe(4, \"async\");\n      i0.ɵɵtemplate(5, AppComponent_button_5_Template, 2, 0, \"button\", 2);\n      i0.ɵɵpipe(6, \"async\");\n      i0.ɵɵtemplate(7, AppComponent_button_7_Template, 2, 0, \"button\", 3);\n      i0.ɵɵpipe(8, \"async\");\n      i0.ɵɵtemplate(9, AppComponent_button_9_Template, 2, 0, \"button\", 2);\n      i0.ɵɵpipe(10, \"async\");\n      i0.ɵɵelement(11, \"br\");\n      i0.ɵɵelementStart(12, \"p\");\n      i0.ɵɵtext(13);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(14, AppComponent_p_14_Template, 2, 0, \"p\", 1);\n      i0.ɵɵpipe(15, \"async\");\n      i0.ɵɵpipe(16, \"async\");\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      let tmp_0_0;\n      let tmp_1_0;\n      let tmp_2_0;\n      let tmp_3_0;\n      let tmp_4_0;\n      let tmp_6_0;\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_0_0 = i0.ɵɵpipeBind1(2, 8, ctx.current$)) == null ? null : tmp_0_0.state) === 1);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = i0.ɵɵpipeBind1(4, 10, ctx.current$)) == null ? null : tmp_1_0.state) === 2);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = i0.ɵɵpipeBind1(6, 12, ctx.current$)) == null ? null : tmp_2_0.state) === 1);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = i0.ɵɵpipeBind1(8, 14, ctx.current$)) == null ? null : tmp_3_0.state) === 2);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_4_0 = i0.ɵɵpipeBind1(10, 16, ctx.current$)) == null ? null : tmp_4_0.state) === 2);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate2(\"Application State: \", ctx.appStore.state, \" Previous: \", ctx.appStore.previous, \"\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_6_0 = i0.ɵɵpipeBind1(15, 18, ctx.current$)) == null ? null : tmp_6_0.state) === 2 && ((tmp_6_0 = i0.ɵɵpipeBind1(16, 20, ctx.current$)) == null ? null : tmp_6_0.previous) === 3);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i2.AsyncPipe],\n  styles: [\".btn[_ngcontent-%COMP%] {\\n\\n    border-radius: 0.25rem;\\n\\n    padding-top: 0.5rem;\\n\\n    padding-bottom: 0.5rem;\\n\\n    padding-left: 1rem;\\n\\n    padding-right: 1rem;\\n\\n    font-weight: 700\\n}\\n\\n.btn-blue[_ngcontent-%COMP%] {\\n\\n    --tw-bg-opacity: 1;\\n\\n    background-color: rgb(59 130 246 / var(--tw-bg-opacity));\\n\\n    --tw-text-opacity: 1;\\n\\n    color: rgb(255 255 255 / var(--tw-text-opacity))\\n}\\n\\n.btn-blue[_ngcontent-%COMP%]:hover {\\n\\n    --tw-bg-opacity: 1;\\n\\n    background-color: rgb(29 78 216 / var(--tw-bg-opacity))\\n}\\n\\n.btn-red[_ngcontent-%COMP%] {\\n\\n    --tw-bg-opacity: 1;\\n\\n    background-color: rgb(239 68 68 / var(--tw-bg-opacity));\\n\\n    --tw-text-opacity: 1;\\n\\n    color: rgb(0 0 0 / var(--tw-text-opacity))\\n}\\n\\n.btn-red[_ngcontent-%COMP%]:hover {\\n\\n    --tw-bg-opacity: 1;\\n\\n    background-color: rgb(185 28 28 / var(--tw-bg-opacity))\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDRTs7SUFBQSxzQkFBQTs7SUFBQSxtQkFBQTs7SUFBQSxzQkFBQTs7SUFBQSxrQkFBQTs7SUFBQSxtQkFBQTs7SUFBQTtBQUFBOztBQUdBOztJQUFBLGtCQUFBOztJQUFBLHdEQUFBOztJQUFBLG9CQUFBOztJQUFBO0FBQUE7O0FBR0E7O0lBQUEsa0JBQUE7O0lBQUE7QUFBQTs7QUFJQTs7SUFBQSxrQkFBQTs7SUFBQSx1REFBQTs7SUFBQSxvQkFBQTs7SUFBQTtBQUFBOztBQUlBOztJQUFBLGtCQUFBOztJQUFBO0FBQUEiLCJmaWxlIjoiYXBwLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmJ0biB7XG4gIEBhcHBseSBmb250LWJvbGQgcHktMiBweC00IHJvdW5kZWQ7XG59XG4uYnRuLWJsdWUge1xuICBAYXBwbHkgYmctYmx1ZS01MDAgdGV4dC13aGl0ZTtcbn1cbi5idG4tYmx1ZTpob3ZlciB7XG4gIEBhcHBseSBiZy1ibHVlLTcwMDtcbn1cblxuLmJ0bi1yZWQge1xuICBAYXBwbHkgYmctcmVkLTUwMCB0ZXh0LWJsYWNrO1xufVxuXG4uYnRuLXJlZDpob3ZlciB7XG4gIEBhcHBseSBiZy1yZWQtNzAwO1xufVxuIl19 */\"]\n});","map":{"version":3,"mappings":"AACA,SAASA,UAAT,QAA2B,MAA3B;;;;;;;ICEMC;IAA4DA;IAAOA;;;;;IAAPA;IAAAA;;;;;;IAG5DA;IAAqCA;IAAOA;;;;;IAAPA;IAAAA;;;;;;IADvCA;IACEA;IACFA;;;;;IADiCA;IAAAA;;;;;;IALnCA,8BAA+C,CAA/C,EAA+C,IAA/C;IAEIA;;IACFA;IACAA;;IAGFA;;;;;;;IALmCA;IAAAA;IAEfA;IAAAA;;;;;;IAIpBA,4BAA6C,CAA7C,EAA6C,OAA7C,EAA6C,CAA7C;IAC0BA;IAAiBA;IACzCA;IACAA;IAAsBA;IAAeA;IACrCA;IACFA;;;;;;;;IACAA;IAA6EA;MAAAA;MAAA;MAAA,OAASA,gCAAT;IAAiB,CAAjB;IAAmBA;IAAIA;;;;;;;;IACpGA;IAA4EA;MAAAA;MAAA;MAAA,OAASA,iCAAT;IAAkB,CAAlB;IAAoBA;IAACA;;;;;;;;IACjGA;IAA6EA;MAAAA;MAAA;MAAA,OAASA,kCAAT;IAAmB,CAAnB;IAAqBA;IAAMA;;;;;;IAGxGA;IAAiFA;IAAiCA;;;;ADLpH,OAAM,MAAOC,YAAP,CAAmB;EAIvBC,YACYC,QADZ,EACqC;IAAzB;IAJZ,aAA0B,IAAIJ,UAAJ,EAA1B;IACA,gBAAwD,IAAIA,UAAJ,EAAxD;IAiCA,aAAQ,iBAAR;EA7BI;;EAEJK,QAAQ;IACN,KAAKC,QAAL,GAAgB,KAAKF,QAAL,CAAcG,SAAd,EAAhB;IAGA,KAAKC,KAAL,GAAa,IAAIR,UAAJ,CAAsBS,UAAD,IAAe;MAC/CA,UAAU,CAACC,IAAX,CAAgB;QACdC,MAAM,EAAE,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,CADM;QAEdC,IAAI,EAAE,CAAC,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,CAAD,EAAe,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,CAAf,EAA6B,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,CAA7B;MAFQ,CAAhB;IAID,CALY,CAAb;IAMAC,UAAU,CAAC,MAAM,KAAKT,QAAL,CAAcU,MAAd,EAAP,EAA+B,IAA/B,CAAV;EACD;;EAEDC,MAAM;IACJ,KAAKX,QAAL,CAAcY,YAAd,CAA2B,GAA3B;EACD;;EAEDC,OAAO;IACL,KAAKb,QAAL,CAAcc,YAAd;EACD;;EAEDC,QAAQ;IACN,KAAKf,QAAL,CAAcgB,MAAd,CAAqB,IAAIpB,UAAJ,CAAwBS,UAAD,IAAe;MACzDI,UAAU,CAAC,MAAMJ,UAAU,CAACC,IAAX,CAAgBW,IAAI,CAACC,MAAL,KAAgB,GAAhB,GAAsB,SAAtB,GAAkC,MAAlD,CAAP,EAAkE,IAAlE,CAAV;IACD,CAFoB,CAArB;EAGD;;AAjCsB;;;mBAAZpB,cAAYD;AAAA;;;QAAZC;EAAYqB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCfzB1B;MACEA;;MAQAA;;MAMAA;;MACAA;;MACAA;;MACAA;MACAA;MAAGA;MAAyEA;MAC5EA;;;MACFA;;;;;;;;;;MApBUA;MAAAA;MAQFA;MAAAA;MAMGA;MAAAA;MACAA;MAAAA;MACAA;MAAAA;MAENA;MAAAA;MACCA;MAAAA","names":["Observable","i0","AppComponent","constructor","appStore","ngOnInit","current$","selectAll","data$","subscriber","next","header","rows","setTimeout","loaded","onEdit","edit_clicked","onClose","click_closed","onSubmit","submit","Math","random","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/kris/code/app-state-poc/src/app/app.component.ts","/Users/kris/code/app-state-poc/src/app/app.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs'\nimport { AppStateService, State } from './services/app-state.service';\n\n\nexport interface Data {\n  header: string[]\n  rows: any[][]\n}\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit {\n  data$: Observable<Data> = new Observable()\n  current$: Observable<{state: State, previous: State}> = new Observable()\n\n  constructor(\n    protected appStore: AppStateService\n  ) {}\n\n  ngOnInit(): void {\n    this.current$ = this.appStore.selectAll()\n\n\n    this.data$ = new Observable<Data>((subscriber) => {\n      subscriber.next({\n        header: ['a','b','c'],\n        rows: [['1','2','3'],['2','3','1'],['3','1','2']]\n      })\n    })\n    setTimeout(() => this.appStore.loaded(), 5000)\n  }\n\n  onEdit() {\n    this.appStore.edit_clicked('1')\n  }\n\n  onClose() {\n    this.appStore.click_closed()\n  }\n\n  onSubmit() {\n    this.appStore.submit(new Observable<string>((subscriber) => {\n      setTimeout(() => subscriber.next(Math.random() > 0.4 ? 'success' : 'fail'), 1000)\n    }))\n  }\n\n  title = 'ustitch-manager';  \n}\n","<div class=\"container mx-auto\">\n  <table *ngIf=\"(current$ | async)?.state === 1\">\n    <tr>\n      <th class=\"px-4\" *ngFor=\"let h of (data$ | async)?.header \">{{ h }}</th>\n    </tr>\n    <tr *ngFor=\"let r of (data$ | async)?.rows\">\n      <td class=\"px-4\" *ngFor=\"let c of r\">{{ c }}</td>\n    </tr>\n  </table>\n  <div *ngIf=\"(current$ | async)?.state === 2\">\n    <label for=\"leaseStart\">Lease Start Date:</label>\n    <input type=\"date\" name=\"start\" id=\"leaseStart\">\n    <label for=\"leaseEnd\">Lease End Date:</label>\n    <input type=\"date\" name=\"end\" id=\"leaseEnd\">\n  </div>\n  <button *ngIf=\"(current$ | async)?.state === 1\" class=\"p-1 m-2 btn btn-blue\" (click)=\"onEdit()\">Edit</button>\n  <button *ngIf=\"(current$ | async)?.state === 2\" class=\"p-1 m-2 btn btn-red\" (click)=\"onClose()\">X</button>\n  <button *ngIf=\"(current$ | async)?.state === 2\" class=\"p-1 m-2 btn btn-blue\" (click)=\"onSubmit()\">Submit</button>\n  <br/>\n  <p>Application State: {{ appStore.state }} Previous: {{ appStore.previous }}</p>\n  <p *ngIf=\"(current$ | async)?.state === 2 && (current$ | async)?.previous === 3\">Error Occured Please try again...</p>\n</div>"]},"metadata":{},"sourceType":"module"}